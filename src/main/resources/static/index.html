<!-- src/main/resources/static/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>GitHub OAuth demo</title>
    <style>
        body{font-family:system-ui,sans-serif;margin:2rem}
        #users img{width:32px;height:32px;border-radius:50%;vertical-align:middle;margin-right:.5rem}
        table{border-collapse:collapse;margin-top:1rem}
        th,td{border:1px solid #ccc;padding:.5rem 1rem}
    </style>
</head>
<body>
<h1>GitHubÂ OAuth demo</h1>

<p><a href="/login-github">ðŸ”‘Â Login with GitHub</a></p>

<h2>Known users</h2>
<table id="users">
    <thead><tr><th>#</th><th>User</th><th>Name</th></tr></thead>
    <tbody></tbody>
</table>

<script>
    async function loadUsers() {
        const resp = await fetch('/api/users');
        const users = await resp.json();
        const tbody = document.querySelector('#users tbody');
        tbody.innerHTML = '';
        users.forEach((u,i) => {
            const row = tbody.insertRow();
            row.insertCell().textContent = i+1;
            row.insertCell().innerHTML   = `<img src="${u.avatarUrl}">${u.login}`;
            row.insertCell().textContent = u.name ?? '';
        });
    }
    loadUsers();
</script>
</body>
</html>
